<div class="googlenet-examples">
  {{#each range(5) as x}}
    <div class="example">
      <!--<span class="description">Edges</span>-->
      <div class="images">
        {{#each range(6) as y}}
          <Sprite src_class='sprite_hero' x={{x}} y={{y}} bind:size bind:sprite_scale hover=true/>
        {{/each}}
      </div>
      <span class="description"><strong>{{descriptions[x]}}</strong> ({{names[x]}})</span>
    </div>
  {{/each}}
</div>
<figcaption>
  Feature visualization allows us to see how GoogLeNet, trained on the ImageNet dataset, builds up its understanding of images over many layers.
  Visualizations of all channel are available in the <a href="appendix/">appendix</a>.
</figcaption>

<style>

  figcaption {
    grid-column: text;
  }

  .sprite_hero {
    background-image: url("images/sprite_hero.png");
  }

  .googlenet-examples {
    font-size: 16px;
    display: flex;
    flex-flow: column;
    grid-column: text-start / screen-end;
    /*overflow-x: hidden;*/
    /*overflow-y: visible;*/
  }
  
  .googlenet-examples .example {
    display: flex;
    flex-flow: column;
  }
  
  .googlenet-examples .example .images {
    display: flex;
    flex-flow: row;
    flex-wrap: wrap;
    justify-content: flex-start;
  }
  
  .googlenet-examples .example .images > * {
    margin-bottom: 5px;
    margin-right: 5px;
  }
  
  .googlenet-examples .inner {
    image-rendering: auto;
  }
  
  .googlenet-examples .example .images span:last-of-type {
    margin-bottom: 0;
  }
  .googlenet-examples .example:last-of-type {
    /*margin-right: 0;*/
  }
  .googlenet-examples > div:last-child {
  }
  
  .description {
    width: 100%;
    margin-top: 0.25em;
    margin-bottom: 1.5em;
    color: rgba(0, 0, 0, 0.9);
    line-height: normal;
    font-size: 0.8em;
  }
  
  @media (min-width: 1105px) {
    .googlenet-examples {
      grid-column: screen;
      flex-flow: row;
      justify-content: center;
    }
    
    .googlenet-examples .example .images {
      flex-wrap: wrap;
    }
    
    .googlenet-examples .example {
      margin-right: 10px;
    }
    
    .googlenet-examples .example:last-of-type {
      margin-right: 0;
    }
    
    .googlenet-examples .example .images {
      max-width:  calc((100px * 2) + 10px);
      min-height: calc((100px * 3) + 10px);
    }
  }
  
  @media (min-width: 1400px) {    
    .googlenet-examples .example {
      margin-right: 15px;
    }
    
    .googlenet-examples .example .images {
      max-width:  calc((125px * 2) + 10px);
      min-height: calc((125px * 3) + 10px);
    }
  }
  

</style>


<script>
  import Sprite from "./Sprite.html";
  
  function range(n){
    return Array(n).fill().map((_, i) => i);
  }
  
  export default {
    data() {
      return {
        ns: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],
        size: 100,
        sprite_scale: 1.0,
        names: [
          "layer conv2d0",
          "layer mixed3a",
          "layer mixed4a",
          "layers mixed4b & mixed4c",
          "layers mixed4d & mixed4e",
        ],
        descriptions: [
          "Edges",
          "Textures",
          "Patterns",
          "Parts",
          "Objects",
        ]
      }
    },
    oncreate: function() {
      this.mq = matchMedia("(min-width: 1400px)");
      this.mq.onchange = (event) => this.set({size: event.matches ? 125 : 100});
      this.set({
        size: this.mq.matches ? 125 : 100,
      });
    },
    components: { Sprite },
    helpers: { range },
  }
</script>
